language: python
python:
  - "2.7"

addons:
  apt:
    packages:
    - liblapack-dev
    - libblas-dev
    - gfortran
    - libgeos-dev
    - libglib2.0-dev
    - libnetcdf-dev
    - netcdf-bin
    - libhdf5-serial-dev

install:
  - sudo ln -s /usr/lib/libgeos-3.2.2.so /usr/lib/libgeos.so
  - sudo ln -s /usr/lib/libgeos-3.3.8.so /usr/lib/libgeos.so.1
  - wget "https://bootstrap.pypa.io/ez_setup.py" -O- | python
  - pip install numpy
  - ./install-pyferret.sh
  - ./install-esmp.sh
  - export PYTHONPATH=$PYTHONPATH:$HOME/pyferret/ib/python2.7/site-packages:$HOME/esmp.ESMF_6_3_0rp1_ESMP_01
  - yes | python setup.py install
  - pip install coveralls

cache:
  - bundler
  - apt

script:
  - coverage run --source=geodat setup.py test

after_success: coveralls